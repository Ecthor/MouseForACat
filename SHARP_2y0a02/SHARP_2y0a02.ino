#define irsensor A1
int dist_tab[]={0,108840,57125,39164,29953,24323,20515,17761,15675,14037,12717,11629,10716,9939,9269,8686,8173,7718,7312,6948,6619,6320,6047,5797,5567,5355,5159,4977,4807,4649,4500,4362,4231,4108,3992,3883,3779,3681,3587,3499,3414,3334,3257,3184,3114,3047,2983,2921,2862,2805,2750,2698,2647,2599,2552,2506,2462,2420,2379,2340,2301,2264,2228,2193,2160,2127,2095,2064,2034,2005,1977,1949,1922,1896,1871,1846,1822,1798,1775,1752,1731,1709,1688,1668,1648,1629,1610,1591,1573,1555,1537,1520,1504,1487,1471,1456,1440,1425,1410,1396,1382,1368,1354,1341,1328,1315,1302,1290,1277,1265,1253,1242,1230,1219,1208,1197,1187,1176,1166,1156,1146,1136,1126,1117,1107,1098,1089,1080,1071,1063,1054,1046,1037,1029,1021,1013,1005,998,990,983,975,968,961,954,947,940,933,926,919,913,906,900,894,887,881,875,869,863,857,852,846,840,835,829,824,818,813,808,803,797,792,787,782,777,773,768,763,758,754,749,744,740,736,731,727,722,718,714,710,706,701,697,693,689,685,682,678,674,670,666,663,659,655,652,648,645,641,638,634,631,627,624,621,617,614,611,608,605,601,598,595,592,589,586,583,580,577,574,571,569,566,563,560,557,555,552,549,547,544,541,539,536,533,531,528,526,523,521,518,516,514,511,509,507,504,502,500,497,495,493,491,488,486,484,482,480,477,475,473,471,469,467,465,463,461,459,457,455,453,451,449,447,445,443,441,440,438,436,434,432,430,429,427,425,423,421,420,418,416,415,413,411,410,408,406,405,403,401,400,398,396,395,393,392,390,389,387,386,384,383,381,380,378,377,375,374,372,371,369,368,367,365,364,362,361,360,358,357,356,354,353,352,350,349,348,346,345,344,343,341,340,339,337,336,335,334,333,331,330,329,328,327,325,324,323,322,321,320,318,317,316,315,314,313,312,311,310,308,307,306,305,304,303,302,301,300,299,298,297,296,295,294,293,292,291,290,289,288,287,286,285,284,283,282,281,280,279,278,277,276,275,274,273,273,272,271,270,269,268,267,266,265,264,264,263,262,261,260,259,258,258,257,256,255,254,253,253,252,251,250,249,249,248,247,246,245,245,244,243,242,241,241,240,239,238,238,237,236,235,235,234,233,232,232,231,230,229,229,228,227,227,226,225,224,224,223,222,222,221,220,220,219,218,218,217,216,216,215,214,214,213,212,212,211,210,210,209,208,208,207,206,206,205,205,204,203,203,202,202,201,200,200,199,198,198,197,197,196,196,195,194,194,193,193,192,191,191,190,190,189,189,188,187,187,186,186,185,185,184,184,183,182,182,181,181,180,180,179,179,178,178,177,177,176,176,175,175,174,174,173,173,172,172,171,171,170,170,169,169,168,168,167,167,166,166,165,165,164,164,163,163,162,162,161,161,160,160,159,159,159,158,158,157,157,156,156,155,155,154,154,154,153,153,152,152,151,151,150,150,150,149,149,148,148,147,147,147,146,146,145,145,145,144,144,143,143,142,142,142,141,141,140,140,140,139,139,138,138,138,137,137,136,136,136,135,135,135,134,134,133,133,133,132,132,131,131,131,130,130,130,129,129,128,128,128,127,127,127,126,126,126,125,125,125,124,124,123,123,123,122,122,122,121,121,121,120,120,120,119,119,119,118,118,118,117,117,117,116,116,116,115,115,115,114,114,114,113,113,113,112,112,112,111,111,111,110,110,110,109,109,109,109,108,108,108,107,107,107,106,106,106,105,105,105,105,104,104,104,103,103,103,102,102,102,102,101,101,101,100,100,100,100,99,99,99,98,98,98,98,97,97,97,96,96,96,96,95,95,95,94,94,94,94,93,93,93,93,92,92,92,91,91,91,91,90,90,90,90,89,89,89,89,88,88,88,88,87,87,87,86,86,86,86,85,85,85,85,84,84,84,84,83,83,83,83,82,82,82,82,81,81,81,81,81,80,80,80,80,79,79,79,79,78,78,78,78,77,77,77,77,76,76,76,76,76,75,75,75,75,74,74,74,74,74,73,73,73,73,72,72,72,72,72,71,71,71,71,70,70,70,70,70,69,69,69,69,68,68,68,68,68,67,67,67,67,67,66,66,66,66,66,65,65,65,65,64,64,64,64,64,63,63,63,63,63,62,62,62,62,62,61,61,61,61,61,60,60,60,60,60,59,59,59,59,59,59,58,58,58,58,58,57,57,57,57,57,56,56,56,56,56,55,55,55,55,55,55,54,54,54,54,54,53,53,53,53,53,53,52,52,52,52,52,51,51,51,51,51,51,50,50,50,50,50,50,49,49,49,49,49,48,48,48,48,48,48,47,47,47,47,47,47,46,46,46,46,46,46,45,45,45,45,45,45,44,44,44,44,44,44,43,43,43,43,43,43,42,42,42,42,42,42,42,41,41};

void setup() {
  pinMode(13, OUTPUT);
  Serial.begin(9600);
  Serial.print("Initializing...");
}

void loop() {
  unsigned long time = millis();

  Serial.print("\nTesting...\n");
  //-------IR
  Serial.println("Distance IR voltage:");
  int irval = analogRead(irsensor);
  //zakres inta 64-600
  //zakres V 0.1-2.8
  //Serial.println(irval);
  //float v=irval * (5.0 / 1023.0); // voltage
  //Serial.println(v);
  Serial.println("Distance:");
  if (irval<102 || irval>614) // If voltage is lesser than 0.5 you cannot be sure if it's close or far; if greater than 3, there is something wrong
    Serial.println("Out of range!");
  else
  {
    int irdist = dist_tab[irval];
    Serial.println(float(irdist)/10.0);
  } 
  delay(50);
  digitalWrite(13, LOW);
  delay(50);
  
}
